<?xml version="1.0" encoding="UTF-8"?>
<!-- copy from https://mybatis.org/mybatis-3/ko/getting-started.html -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team4.localer.dao.MemberDAO">
	<select id="memLogin" resultType="com.team4.localer.vo.MemberVO">
		select userid, mem_name, mem_nick, loc_gu, mem_type from member where userid=#{param1} and userpwd=#{param2}
	</select>
	<insert id="logCount" parameterType="String">
		INSERT INTO LOGCOUNT(userid, loc_gu) VALUES (#{param1}, #{param2})
	</insert>
	
	<select id="searchId" parameterType="com.team4.localer.vo.MemberVO" resultType="String">
		SELECT userid FROM MEMBER WHERE mem_name=#{mem_name} AND mem_email=#{mem_email}
	</select>
	<select id="searchPwd" parameterType="com.team4.localer.vo.MemberVO" resultType="String">
		select userpwd from member where mem_name=#{mem_name} and userid=#{userid} and mem_email=#{mem_email}
	</select>
	
	<select id="idDoubleCheck" resultType="String">
		select userid from member where userid=#{param1}
	</select>
	<select id="nickNameDoubleCheck" resultType="String">
		select mem_nick from member where mem_nick=#{param1}
	</select>
	
	<insert id="insertMember" parameterType="com.team4.localer.vo.MemberVO">
		INSERT INTO MEMBER(MEM_NO, userid, userpwd, MEM_NAME, MEM_TEL, MEM_EMAIL, MEM_ZIP, MEM_ADDR, MEM_DETAIL, LOC_GU, MEM_PROF,MEM_NICK, MEM_CONTENT)
		VALUES (MEMSQ.nextval, #{userid}, #{userpwd}, #{mem_name}, #{mem_tel}, #{mem_email}, 
		#{mem_zip}, #{mem_addr}, #{mem_detail}, #{loc_gu}, #{mem_prof}, #{mem_nick}, #{mem_content})
	</insert>
	<insert id="insertEventbonus" >
		INSERT INTO CHA_P(userid, CHA_POINT, CHA_MTH) VALUES (#{param1}, 3000, 0)
	</insert>
	<update id="updateMember" parameterType="com.team4.localer.vo.MemberVO">
		UPDATE MEMBER SET MEM_NICK=#{mem_nick}, mem_prof=#{mem_prof}, MEM_CONTENT =#{mem_content}, 
		MEM_TEL = #{mem_tel}, MEM_EMAIL = #{mem_email}, MEM_ZIP = ${mem_zip}, MEM_ADDR = #{mem_addr}, MEM_DETAIL = #{mem_detail}, LOC_GU = #{loc_gu} 
		WHERE userid = #{userid}
	</update>
	
	<select id="sellerPwdDoubleCheck" resultType="String">
		select userpwd from member where userid=#{param1} and userpwd=#{param2}
	</select>
	<insert id="insertSeller" parameterType="com.team4.localer.vo.SellerVO">
		INSERT INTO SELLER(SEL_NUM, userid, sel_name, company, com_num, sel_tel, sel_email, sel_zip, sel_addr, sel_detail, acc_name, bank, account, sel_prof, sel_content) 
		VALUES (SELSQ.nextval, #{userid}, #{sel_name}, #{company}, #{com_num}, #{sel_tel}, #{sel_email},  
		#{sel_zip}, #{sel_addr}, #{sel_detail}, #{acc_name}, #{bank}, ${account}, #{sel_prof}, #{sel_content})
	</insert>
	<update id="updateMemStatus">
		UPDATE MEMBER SET MEM_TYPE = 2 WHERE USERID = #{param1}
	</update>
	<select id="selectSeller" resultType="com.team4.localer.vo.SellerVO">
		SELECT * FROM seller WHERE userid=#{param1}
	</select>		
	<update id="memPostCount"><!-- 게시글올리면 카운트되는 함수 -->
		update member set mem_post = mem_post+1 where userid=#{param1}
	</update>
</mapper>