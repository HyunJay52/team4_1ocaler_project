<?xml version="1.0" encoding="UTF-8"?>
<!-- copy from https://mybatis.org/mybatis-3/ko/getting-started.html -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team4.localer.dao.MyInfoDAO">
	
	<select id="setMyinfo" resultType="com.team4.localer.vo.MemberVO">
		select * from member where userid=#{param1}
	</select>
	<select id="goMyinfopage" resultType="com.team4.localer.vo.MemberVO">
		select * from member where userid=#{userid} and userpwd=#{userpwd}
	</select>
	
	<insert id="pointCharge" parameterType="com.team4.localer.vo.Cha_pVO">
		insert into cha_p(userid, cha_point, cha_mth)
		values(#{userid}, #{cha_point}, #{cha_mth})
	</insert>
	
	<select id="joinPoint" resultType="String">
		select sum(cha_point) from cha_p c join member m on c.userid=m.userid 
		where m.userid = #{param1}
	</select>

	<select id="allPointSelect" resultType="com.team4.localer.vo.Cha_pVO">
		<![CDATA[
		select * from (
		select * from (
		select userid, cha_point, to_char(po_date, 'YYYY-MM-DD HH:MI:SS') po_date, cha_mth from cha_p
		union all
		select userid, sp_point, to_char(sp_date, 'YYYY-MM-DD HH:MI:SS') sp_date, sp_item from sp_p )
		where rownum<=#{param2} order by po_date asc)
		where userid = #{param1} and rownum<=#{param3} order by po_date desc]]>
	</select>
	
	<select id="pointCount" resultType="String">
		select count(userid) from 
		(select * from cha_p union all 
		select * from sp_p where userid=#{param} )
	</select>
</mapper>